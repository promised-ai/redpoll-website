{% import "macros/signup.html" as signup %}
{% extends "base.html" %}
{% block title %}Redpoll - {{ page.title }}{% endblock title %}
{% block head %}
  {% set img_url = "../static/img/" ~ page.extra.image %}
  {% set small_img = resize_image(path=img_url, width=1920, height=1080, op="fill") %}
  {{ super() }}
  <link rel="stylesheet" href="/blog.css">
  <style>
    #main {
      background-color: #f7f7f7;
    }
  </style>
  <meta name="author" content="{{ page.extra.author }} (Redpoll)">
  <meta property="og:title" content="{{ page.title }}"/>
  <meta property="og:image" content="{{ small_img }}"/>
  <meta property="og:description" content="{{ page.extra.subheading }}"/>
  <meta property="og:url" content="{{ config.base_url }}/{{ page.path }}" />
  <meta property="keywords" content="{% for item in page.taxonomies.categories %}{% if loop.index == page.taxonomies.categories | length %}{{ item }}{% else %}{{ item }}, {% endif %}{% endfor %}" />
{% endblock head %}

{% block content %}

{% set default_theme = "light-opaque" %}
{% if page.extra.theme %}
{% set page_theme = page.extra.theme %}
{% else  %}
{% set page_theme = default_theme %}
{% endif  %}

<div id="post-main" class="content-row">
    <img class=bkg-img src="{{ small_img }}">
    <div class="content-box">
      <div id=post-header class="bh-{{ page_theme }}">
        <div id="post-header-blur">
          <img class=bkg-img-blur src="{{ small_img }}">
        </div>
        <div id="post-header-inner">
          <div id=post-meta>
            <div><span class=post-meta-item>BY</span> {{ page.extra.author }}</div>
            <div><span class=post-meta-item>ON</span> {{ page.date }}</div>
            <div><span class=post-meta-item>CAT</span> {{ page.taxonomies.categories }}</div>
          </div><div id=post-titles>
            <h1 class=post-heading>{{ page.title }}</h1>
            <h2 class=post-subheading>{{ page.extra.subheading }}</h2>
          </div>
          <a href="#content-start" class=no-dec>
              <div class="post-scroll-tip mobile-only">
                  &blacktriangledown;
              </div>
          </a>
        </div>
      </div>
    </div>
  </div>
  <div id=post-content class="content-row">
    <div class="content-box">
      <br>
      <br>
      <a name=content-start></a>
      {{ page.content | safe }}
    </div>
  </div>
  {{ signup::signup(heading="Sign up for updates") }}
  <br>
  <div class=section-spacer></div>
{% endblock content %}

